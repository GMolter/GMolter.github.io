:root{
  --bg:#f6f6f5; --ink:#1c1c1a; --muted:#6f726e;
  --panel:#ffffff; --line:#e7e7e2; --accent:#3b7a6f;
  --shadow: 0 1px 0 rgba(0,0,0,.03), 0 10px 30px rgba(0,0,0,.07);
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1211; --ink:#e7e7e5; --muted:#a6aba6;
    --panel:#141816; --line:#2a2e2b; --accent:#4ca495;
    --shadow: 0 0 0 rgba(0,0,0,0), 0 10px 30px rgba(0,0,0,.35);
  }
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  font: 16px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(60,122,111,.08), transparent 50%),
    radial-gradient(900px 480px at 100% 10%, rgba(60,122,111,.07), transparent 55%),
    var(--bg);
}
.wrap{max-width:980px; margin:0 auto; padding:28px 18px}
.header h1{margin:0; font-size:28px}
.sub{margin:.25rem 0 1.1rem; color:var(--muted)}
.grid{
  display:grid; gap:18px;
  grid-template-columns: repeat(auto-fit, minmax(300px,1fr));
}
.card{
  background:var(--panel); border:1px solid var(--line);
  border-radius:14px; padding:16px; box-shadow:var(--shadow);
}
.card-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.card h2{margin:0; font-size:18px}
.pill{
  font-size:12px; padding:4px 8px; border-radius:999px;
  color:#0e2b26; background:color-mix(in srgb, var(--accent) 18%, transparent);
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--line));
}
@media (prefers-color-scheme: dark){
  .pill{color:#d9f3ee}
}
.row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.muted{color:var(--muted); font-size:14px}
.counter strong{font-variant-numeric: tabular-nums}
.help{margin-top:8px; color:var(--muted); font-size:13px}

button, .btn{
  appearance:none; border:1px solid var(--line); background:#fff; color:var(--ink);
  border-radius:10px; padding:8px 12px; font:inherit; cursor:pointer;
}
.btn-ghost{background:transparent}
button:focus-visible{outline:2px solid var(--accent); outline-offset:2px}
select, input[type="number"], input[type="range"], input[type="color"]{
  border:1px solid var(--line); border-radius:8px; padding:6px 8px; background:#fff; color:var(--ink); font:inherit;
}

/* ---- 2048 ---- */
.g2048-grid{
  --size:4;
  display:grid; gap:10px;
  grid-template-columns: repeat(var(--size), 1fr);
  background: color-mix(in srgb, var(--ink) 4%, transparent);
  padding:10px; border-radius:12px; border:1px solid var(--line);
  user-select:none;
}
.g2048-cell{
  position:relative; aspect-ratio:1/1; display:grid; place-items:center;
  background:#eceeea; border-radius:10px; font-weight:700; font-size:22px;
  border:1px solid var(--line);
  transition: transform .08s ease;
}
@media (prefers-reduced-motion: reduce){
  .g2048-cell{transition:none}
}
.g2048-cell[data-v="0"]{opacity:.5; background:#f4f6f3}
.g2048-cell[data-v="2"]{background:#f7f5ef}
.g2048-cell[data-v="4"]{background:#efece5}
.g2048-cell[data-v="8"]{background:#e6efe9}
.g2048-cell[data-v="16"]{background:#d8ece3}
.g2048-cell[data-v="32"]{background:#cce6dd}
.g2048-cell[data-v="64"]{background:#c1e0d7}
.g2048-cell[data-v="128"]{background:#b6dacF}
.g2048-cell[data-v="256"]{background:#acd5c9}
.g2048-cell[data-v="512"]{background:#a2cfC3}
.g2048-cell[data-v="1024"]{background:#97c9bd}
.g2048-cell[data-v="2048"]{background:#8dc3b7}

/* ---- Match-3 ---- */
.m3-grid{
  --size:8;
  display:grid; gap:6px;
  grid-template-columns: repeat(var(--size), 1fr);
  padding:8px; border-radius:12px; border:1px solid var(--line);
  background: color-mix(in srgb, var(--ink) 4%, transparent);
  user-select:none;
}
.m3-cell{
  aspect-ratio:1/1; border-radius:10px; border:1px solid var(--line);
  display:grid; place-items:center; font-weight:700;
  transition: transform .08s ease;
  cursor:pointer;
}
.m3-cell.selected{outline:2px solid var(--accent); outline-offset:2px}
.m3-type-0{background:#f6e8e8}
.m3-type-1{background:#e8f3f6}
.m3-type-2{background:#e9f6e8}
.m3-type-3{background:#f6f2e8}
.m3-type-4{background:#efe8f6}
.m3-type-5{background:#e8eef6}

/* ---- Simon ---- */
.si-grid{
  display:grid; gap:12px; grid-template-columns: repeat(2, 1fr);
  max-width:360px; margin-top:8px;
}
.pad{
  aspect-ratio:1/1; border-radius:14px; border:1px solid var(--line);
  background:#eceeea; cursor:pointer; position:relative;
  transition: transform .06s ease, filter .06s ease;
}
.pad.lit{filter:brightness(1.2); transform:scale(1.02)}
.p1{background:#e7f4ef}
.p2{background:#f4efe7}
.p3{background:#e9eef7}
.p4{background:#f3e7f4}

/* ---- misc ---- */
.footer{margin-top:22px; color:var(--muted); font-size:13px}
.toast{
  position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
  background:var(--panel); color:var(--ink); border:1px solid var(--line);
  padding:8px 12px; border-radius:10px; box-shadow:var(--shadow); font-size:14px;
}
